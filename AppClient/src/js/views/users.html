<div class="oj-flex oj-flex-items-pad">
    <div id="mainContent" class="oj-flex-item oj-sm-12 oj-md-12 demo-page-content-area page-padding" >
      <div class="oj-flex oj-sm-flex-items-initial demo-center-panels">

          <div class="oj-panel demo-mypanel oj-flex-item" style="width:65%">
            <div id="userList" class="oj-flex-item oj-md-9 oj-sm-12">
            <h3>Users</h3><hr/>
              <table id="table" 
                     data-bind="ojComponent: {component: 'ojTable', 
                                              data: datasource, 
                                              columns: [{headerText: 'Remove', id: 'column1', sortable: 'disabled'},
                                                        {headerText: 'ID', 
                                                         field: 'id', sortable: 'enabled'},
                                                        {headerText: 'Username', 
                                                         field: 'username', sortable: 'enabled'},
                                                        {headerText: 'First Name', 
                                                         field: 'first_name'},
                                                        {headerText: 'Last Name', 
                                                         field: 'last_name'},
                                                        {headerText: 'Email', 
                                                         field: 'email'},
                                                        {headerText: 'Role', 
                                                         field: 'role_name'}],
                                              selectionMode: {row: 'none', column:'none'},
                                              rowTemplate: 'row_tmpl'}">
              </table>
              <br/>
              (Click on a User Name to edit it)
              <br/><br/>
              <button id="deleteUser_btn" data-bind="enable: somethingChecked, click: deleteUser">Remove User(s)</button>
            </div>
          </div>

          <div id="addUser" class="oj-panel demo-mypanel oj-flex-item" style="width:35%">
            <!-- A simple form is used to add a new User record. -->
            <div id="newUserForm">
              <form class="oj-form oj-md-odd-cols-6 oj-md-labels-inline" data-bind="submit: addUser">
                <h3>New User</h3><hr/>
                <div class="oj-flex">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserName" class="oj-label">Username</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserName" maxlength='30' data-bind="ojComponent:{component:'ojInputText'}"/>
                  </div>
                </div>
                <div class="oj-flex">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserName" class="oj-label">Password</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserPassword" type="password" required maxlength='30' data-bind="ojComponent:{component:'ojInputPassword'}"/>
                  </div>
                </div>
                <div class="oj-flex">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserFirstName" class="oj-label">First Name</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserFirstName" maxlength='30' data-bind="ojComponent:{component:'ojInputText'}"/>
                  </div>
                </div>
                <div class="oj-flex ">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserLastName" class="oj-label">Last Name</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserLastName" maxlength='30' data-bind="ojComponent:{component:'ojInputText'}"/>
                  </div>
                </div>  
                <div class="oj-flex ">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserEmail" class="oj-label">Email</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserEmail" type="email" maxlength='30' data-bind="ojComponent:{component:'ojInputText', pattern:emailPattern }"/>
                  </div>
                </div> 
                <div class="oj-flex">  
                  <div class="oj-flex-item new_label">
                    <label for="newUserRole" class="oj-label">Role</label>
                  </div>
                  <div class="oj-flex-item">
                    <input id="newUserRole" list="increments" maxlength='30' value="2" 
                    data-bind="ojComponent:{component:'ojCombobox'}"/>
                    <datalist id="increments">
                      <option value="1">admin</option>
                      <option value="3">manager</option>
                      <option value="2">user</option>
                    </datalist>
                  </div>
                </div>  
                <button id="saveBtn" class="oj-button" type="submit" data-bind="ojComponent:{component:'ojButton', label: 'Add User'}"></button>                                      
              </form>
            </div>
          </div>

          <br/>
          <div id="editDialog" title="Change User" data-bind="ojComponent:{component: 'ojDialog', initialVisibility: 'hide', resizeBehavior: 'none', dragAffordance: 'title-bar', modality: 'modeless'}">
            <form class="oj-form oj-sm-odd-cols-12" data-bind="submit: updateUser">

              <div class="oj-dialog-body">
                <div class="oj-md-odd-cols-4">
                  <label for="editUserName" class="oj-label oj-label-inline">Username</label>
                  <input id="editUserName" type="text" data-bind="ojComponent: {component:'ojInputText', value: currentUser().username}">
                  <label for="editFirstName" class="oj-label oj-label-inline">First Name</label>
                  <input id="editFirstName" type="text" data-bind="ojComponent: {component:'ojInputText', value: currentUser().first_name}">
                  <label for="editLastName" class="oj-label oj-label-inline">Last Name</label>
                  <input id="editLastName" type="text" data-bind="ojComponent: {component:'ojInputText', value: currentUser().last_name}">
                  <label for="editEmail" class="oj-label oj-label-inline">Email</label>
                  <input id="editEmail" type="text" data-bind="ojComponent: {component:'ojInputText', value: currentUser().email, pattern:emailPattern}">
                    <input id="editRole" list="increments" maxlength='30' 
                    data-bind="ojComponent:{component:'ojCombobox', value:currentUser().role_id}"/>
                </div>
              </div>
              <div class="oj-dialog-footer">
                <button id="submitBtn" type="submit" data-bind="ojComponent: {component:'ojButton', label: 'Change'}"></button>
                <button id="resetBtn" data-bind="ojComponent: {component: 'ojButton', label: 'Cancel'}, click: function(){$('#editDialog').ojDialog('close');}"></button>
              </div>
            </form>
          </div>
          <br/>

        </div>
      </div>
    </div>
  </div>

<script type="text/html" id="row_tmpl">    
    <tr>
        <td><input type="checkbox" data-bind="attr: {id: id}, click: $parent.enableDelete"/></td>
        <td><div id="userId" data-bind="text: id"></div></td>
        <td><div id="userName" data-bind="text: username, click: function(data, event){$parent.showChangeUserDialog(id,data,event)}"></div></td>
        <td><div id="firstName" data-bind="text: first_name"></div></td>
        <td><div id="lastName" data-bind="text: last_name"></div></td>
        <td><div id="email" data-bind="text: email"></div></td>
        <td><div id="role" data-bind="text: role_name"></div></td>
    </tr>
</script>           